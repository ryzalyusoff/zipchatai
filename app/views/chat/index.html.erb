<div id="chatbubble" data-controller="chat">
  <!-- Minimized View: Shown when chat is small -->
  <div id="minimized-view" style="display: none;">
    <button id="open-chat" class="open-button">Chat with us</button>
  </div>

  <!-- Maximized View: Shown when chat is large -->
  <div id="maximized-view" style="display: none;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
      <h3 style="margin: 0;">Chat Support</h3>
      <button id="close-chat" class="close-button">Close</button>
    </div>
    <div id="messages" data-chat-target="messages">
      <div class="message system">
        <div class="message-content">ðŸ‘‹ Hello! How can we help you today?</div>
      </div>
    </div>

    <%= form_with url: chat_messages_path,
      method: :post,
      data: {
        turbo_stream: true,
        action: "turbo:submit-start->chat#submitStart"
      },
      class: "input-container",
      local: false do |f| 
    %>
      <%= f.text_area :content,
          class: "message-input",
          placeholder: "Type your message...",
          data: {
            chat_target: "input",
            action: "keydown->chat#handleKeyPress"
          } %>

      <%= f.submit "Send", class: "send-button" %>
    <% end %>
  </div>
</div>